# include	<compat.h>
# include	<me.h>

# ifdef VMS

# include	"iivmssd.h"

/*
**  IICBWRITE - Routine to call IIwritedb from COBOL.
**
**  This routine generated by ESQLCBL for Release 5.0.
**	EX: 
**	    exec sql insert into table_name (column) values ('hello') end-exec.
**	generated: 
**	    CALL "IICBWRITE" USING DESCRIPTOR "append to t1(col1=""hello"")".
**
**  It was replaced by IIwritio for Release 6 and beyond with:
**	    MOVE "insert into t1 values('hello')" TO IISDAT1(1:30).
**	    CALL "IIwritio" USING VALUE 0 0 1 32 30 REFERENCE IIS1.
**
**  Do not port this file to another environment! If you do, you will be
**  personally whipped by Neil !
**
**  Defines:	IIcbwrite( s )		- Convert string descriptor to C string.
**
**  History:
**		21-may-1985	- Written (ncg)
**		01-aug-1989	- Added static to shut up ranlib (GordonW)
**		10-apr-1993	- Added Comments - Not used in Rel 6. (kathryn).
**
**  Copyright (c) 2004 Actian Corporation
**	21-jan-1999 (hanch04)
**	    replace nat and longnat with i4
**	31-aug-2000 (hanch04)
**	    cross change to main
**	    replace nat and longnat with i4
*/

void
IIcbwrite( sd )
SDESC	*sd;			/* Static string descriptors in COBOL */
{
    char	buf[500];
    register	char *s = buf;
    char	*IIsd_no();

    if (sd->sd_len >= 500)
    	s = IIsd_no( sd );
    else
    {
	MEcopy( sd->sd_ptr, sd->sd_len, s );
	s[sd->sd_len] = '\0';
    }
    IIwritedb( s );
}
# else
static	i4 ranlib_dummy;
# endif /* VMS */
